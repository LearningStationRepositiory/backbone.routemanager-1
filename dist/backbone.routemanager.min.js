(function(a,b,c){"use strict";var d=a.Router.extend({constructor:function(c){var d=this,e={},f=this.routers={},g=c.routes||this.routes;return b.each(g,function(g,h){var i,j,k,l;i=c.prefix,i||(i=h||""),i[i.length-1]==="/"?i=i.slice(0,i.length-1):i&&(i+="/");if(g.prototype instanceof a.Router)j=g.prototype.constructor,l=g.extend({constructor:function(c){var d=a.Router.prototype.constructor;return b.each(this.routes,function(a,b){delete this.routes[b],b=b?i+"/"+b:i,this.routes[b]=a},this),d.apply(this,arguments)}}),k=f[h]=new l,k.__manager__={},b.isFunction(j)&&j.call(k),k.__manager__.prefix=i;else if(b.isString(g)&&b.isString(h)){d[g]=c[g],delete c[g];if(h)return e[i+h]=g;e[i]=g}}),this.routes=e,a.Router.prototype.constructor.call(this)},navigate:function(b,c){a.history.navigate(b,c)}},{configure:function(c){var d=a.RouteManager.prototype.options;if(b.isObject(c))return b.extend(d,c)},Router:a.Router.extend({constructor:function(a){return a(this)}})});d.prototype.options={deferred:function(){return c.Deferred()}},a.RouteManager=d}).call(this,this.Backbone,this._,this.jQuery)